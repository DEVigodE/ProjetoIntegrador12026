# ğŸ“Š Diagramas do Sistema

## 1. IntroduÃ§Ã£o

Este documento apresenta os principais diagramas UML e arquiteturais do sistema, facilitando a compreensÃ£o da estrutura, comportamento e implantaÃ§Ã£o.

---

## 2. Diagrama de Componentes

### 2.1 VisÃ£o Geral dos Componentes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          CLIENT LAYER                                   â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    React Application                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚   Product    â”‚  â”‚    Order     â”‚  â”‚   Delivery   â”‚         â”‚  â”‚
â”‚  â”‚  â”‚   Module     â”‚  â”‚   Module     â”‚  â”‚   Module     â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚     Chat     â”‚  â”‚    Report    â”‚  â”‚     Auth     â”‚         â”‚  â”‚
â”‚  â”‚  â”‚   Module     â”‚  â”‚   Module     â”‚  â”‚   Module     â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â”‚                                                                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚          Shared Components & Services                   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  - HTTP Client  - WebSocket Client  - State Management â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚ HTTPS / WSS
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        API GATEWAY                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Spring Cloud Gateway                                             â”‚ â”‚
â”‚  â”‚  - JWT Authentication Filter                                      â”‚ â”‚
â”‚  â”‚  - Rate Limiting Filter                                           â”‚ â”‚
â”‚  â”‚  - Logging Filter                                                 â”‚ â”‚
â”‚  â”‚  - Dynamic Routing (Eureka Integration)                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                       â”‚                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Eureka     â”‚       â”‚  Config Server  â”‚     â”‚     Kafka      â”‚
â”‚   Server     â”‚       â”‚   (Git Backend) â”‚     â”‚    Cluster     â”‚
â”‚              â”‚       â”‚                 â”‚     â”‚   - Broker 1   â”‚
â”‚  - Service   â”‚       â”‚  - Central      â”‚     â”‚   - Broker 2   â”‚
â”‚    Registry  â”‚       â”‚    Config       â”‚     â”‚   - Zookeeper  â”‚
â”‚  - Health    â”‚       â”‚  - Refresh      â”‚     â”‚                â”‚
â”‚    Check     â”‚       â”‚    Endpoint     â”‚     â”‚  Topics:       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   order.*      â”‚
                                                â”‚   delivery.*   â”‚
                                                â”‚   chat.*       â”‚
                                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MICROSERVICES                                   â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Auth Service   â”‚  â”‚ Product Service â”‚  â”‚  Order Service  â”‚       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚  â”‚ Controllers:    â”‚  â”‚ Controllers:    â”‚  â”‚ Controllers:    â”‚       â”‚
â”‚  â”‚ - AuthCtrler    â”‚  â”‚ - ProductCtrler â”‚  â”‚ - OrderCtrler   â”‚       â”‚
â”‚  â”‚ - UserCtrler    â”‚  â”‚ - CategoryCtrlerâ”‚  â”‚                 â”‚       â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚       â”‚
â”‚  â”‚ Services:       â”‚  â”‚ Services:       â”‚  â”‚ Services:       â”‚       â”‚
â”‚  â”‚ - AuthService   â”‚  â”‚ - ProductSvc    â”‚  â”‚ - OrderService  â”‚       â”‚
â”‚  â”‚ - JwtService    â”‚  â”‚ - StockSvc      â”‚  â”‚ - OrderEvent    â”‚       â”‚
â”‚  â”‚ - UserService   â”‚  â”‚ - CacheSvc      â”‚  â”‚   Producer      â”‚       â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚       â”‚
â”‚  â”‚ Repositories:   â”‚  â”‚ Repositories:   â”‚  â”‚ Repositories:   â”‚       â”‚
â”‚  â”‚ - UserRepo      â”‚  â”‚ - ProductRepo   â”‚  â”‚ - OrderRepo     â”‚       â”‚
â”‚  â”‚ - RoleRepo      â”‚  â”‚ - CategoryRepo  â”‚  â”‚ - CustomerRepo  â”‚       â”‚
â”‚  â”‚ - TokenRepo     â”‚  â”‚                 â”‚  â”‚                 â”‚       â”‚
â”‚  â”‚                 â”‚  â”‚ Event Consumer: â”‚  â”‚ Event Producer: â”‚       â”‚
â”‚  â”‚ Security:       â”‚  â”‚ - OrderAccepted â”‚  â”‚ - OrderCreated  â”‚       â”‚
â”‚  â”‚ - JWT Filter    â”‚  â”‚   Handler       â”‚  â”‚ - OrderAccepted â”‚       â”‚
â”‚  â”‚ - BCrypt        â”‚  â”‚                 â”‚  â”‚ - StatusChanged â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚           â”‚                    â”‚                     â”‚                â”‚
â”‚      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”          â”‚
â”‚      â”‚PostgreSQLâ”‚        â”‚PostgreSQLâ”‚         â”‚PostgreSQLâ”‚          â”‚
â”‚      â”‚  auth_db â”‚        â”‚product_dbâ”‚         â”‚ order_db â”‚          â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚   +      â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                          â”‚  Redis   â”‚                                â”‚
â”‚                          â”‚ (Cache)  â”‚                                â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Delivery Serviceâ”‚  â”‚  Chat Service   â”‚  â”‚ Report Service  â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚ Controllers:    â”‚  â”‚ Controllers:    â”‚  â”‚ Controllers:    â”‚     â”‚
â”‚  â”‚ - DeliveryCtrlr â”‚  â”‚ - ChatCtrler    â”‚  â”‚ - ReportCtrler  â”‚     â”‚
â”‚  â”‚ - PersonCtrler  â”‚  â”‚                 â”‚  â”‚                 â”‚     â”‚
â”‚  â”‚                 â”‚  â”‚ WebSocket:      â”‚  â”‚ Services:       â”‚     â”‚
â”‚  â”‚ Services:       â”‚  â”‚ - MessageHdlr   â”‚  â”‚ - SalesReport   â”‚     â”‚
â”‚  â”‚ - DeliverySvc   â”‚  â”‚ - ChatHandler   â”‚  â”‚ - StockReport   â”‚     â”‚
â”‚  â”‚ - Assignment    â”‚  â”‚                 â”‚  â”‚ - Metrics       â”‚     â”‚
â”‚  â”‚   Service       â”‚  â”‚ Services:       â”‚  â”‚                 â”‚     â”‚
â”‚  â”‚                 â”‚  â”‚ - ChatService   â”‚  â”‚ Repositories:   â”‚     â”‚
â”‚  â”‚ Repositories:   â”‚  â”‚ - MessageSvc    â”‚  â”‚ - OrderRepo     â”‚     â”‚
â”‚  â”‚ - DeliveryRepo  â”‚  â”‚ - RedisPubSub   â”‚  â”‚   (Read Only)   â”‚     â”‚
â”‚  â”‚ - PersonRepo    â”‚  â”‚                 â”‚  â”‚ - ProductRepo   â”‚     â”‚
â”‚  â”‚                 â”‚  â”‚ Repositories:   â”‚  â”‚   (Read Only)   â”‚     â”‚
â”‚  â”‚ Event Consumer: â”‚  â”‚ - ChatRepo      â”‚  â”‚                 â”‚     â”‚
â”‚  â”‚ - OrderReady    â”‚  â”‚ - MessageRepo   â”‚  â”‚ Event Consumer: â”‚     â”‚
â”‚  â”‚   Handler       â”‚  â”‚   (MongoDB)     â”‚  â”‚ - All Events    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚           â”‚                    â”‚                     â”‚              â”‚
â”‚      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”        â”‚
â”‚      â”‚PostgreSQLâ”‚        â”‚ MongoDB  â”‚         â”‚PostgreSQLâ”‚        â”‚
â”‚      â”‚delivery  â”‚        â”‚   +      â”‚         â”‚ order_db â”‚        â”‚
â”‚      â”‚   _db    â”‚        â”‚  Redis   â”‚         â”‚ (Replica)â”‚        â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ (PubSub) â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        INFRASTRUCTURE                                    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ Prometheus   â”‚  â”‚   Grafana    â”‚  â”‚  ELK Stack   â”‚                 â”‚
â”‚  â”‚ (Metrics)    â”‚  â”‚ (Dashboards) â”‚  â”‚   (Logs)     â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Diagrama de SequÃªncia - Fluxo de Pedido

### 3.1 Fluxo Completo: Receber e Processar Pedido

```
â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚Clientâ”‚  â”‚Gatewayâ”‚ â”‚  Order  â”‚  â”‚ Product â”‚  â”‚  Chat   â”‚  â”‚Kafka â”‚
â”‚ App  â”‚  â”‚       â”‚  â”‚ Service â”‚  â”‚ Service â”‚  â”‚ Service â”‚  â”‚      â”‚
â””â”€â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”˜
    â”‚         â”‚           â”‚            â”‚            â”‚           â”‚
    â”‚ 1. POST /orders     â”‚            â”‚            â”‚           â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚            â”‚            â”‚           â”‚
    â”‚         â”‚ 2. Validate JWT        â”‚            â”‚           â”‚
    â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚            â”‚           â”‚
    â”‚         â”‚           â”‚            â”‚            â”‚           â”‚
    â”‚         â”‚ 3. Create Order        â”‚            â”‚           â”‚
    â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚            â”‚           â”‚
    â”‚         â”‚           â”‚            â”‚            â”‚           â”‚
    â”‚         â”‚           â”‚ 4. Save to DB           â”‚           â”‚
    â”‚         â”‚           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
    â”‚         â”‚           â”‚            â”‚            â”‚           â”‚
    â”‚         â”‚           â”‚ 5. Publish event        â”‚           â”‚
    â”‚         â”‚           â”‚ order.created           â”‚           â”‚
    â”‚         â”‚           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚         â”‚           â”‚            â”‚            â”‚           â”‚
    â”‚         â”‚           â”‚            â”‚            â”‚ 6. Create Chat
    â”‚         â”‚           â”‚            â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚         â”‚           â”‚            â”‚            â”‚           â”‚
    â”‚         â”‚ 7. Order Created       â”‚            â”‚           â”‚
    â”‚         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚            â”‚           â”‚
    â”‚         â”‚           â”‚            â”‚            â”‚           â”‚
    â”‚ 8. 201 Created      â”‚            â”‚            â”‚           â”‚
    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚            â”‚            â”‚           â”‚
    â”‚         â”‚           â”‚            â”‚            â”‚           â”‚
    â”‚ 9. WS: Order Notification         â”‚           â”‚           â”‚
    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
    â”‚         â”‚           â”‚            â”‚            â”‚           â”‚
    â”‚ 10. PATCH /orders/123/accept     â”‚            â”‚           â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚            â”‚            â”‚           â”‚
    â”‚         â”‚ 11. Validate & Route   â”‚            â”‚           â”‚
    â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚            â”‚           â”‚
    â”‚         â”‚           â”‚            â”‚            â”‚           â”‚
    â”‚         â”‚           â”‚ 12. Update Status       â”‚           â”‚
    â”‚         â”‚           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚           â”‚
    â”‚         â”‚           â”‚            â”‚            â”‚           â”‚
    â”‚         â”‚           â”‚ 13. Publish event       â”‚           â”‚
    â”‚         â”‚           â”‚ order.accepted          â”‚           â”‚
    â”‚         â”‚           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚         â”‚           â”‚            â”‚            â”‚           â”‚
    â”‚         â”‚           â”‚            â”‚ 14. Consume Event      â”‚
    â”‚         â”‚           â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚         â”‚           â”‚            â”‚            â”‚           â”‚
    â”‚         â”‚           â”‚            â”‚ 15. Decrement Stock    â”‚
    â”‚         â”‚           â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
    â”‚         â”‚           â”‚            â”‚            â”‚           â”‚
    â”‚         â”‚           â”‚            â”‚            â”‚ 16. Consume Event
    â”‚         â”‚           â”‚            â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚         â”‚           â”‚            â”‚            â”‚           â”‚
    â”‚         â”‚           â”‚            â”‚            â”‚ 17. Send Msg
    â”‚         â”‚           â”‚            â”‚            â”‚"Pedido aceito!"
    â”‚         â”‚           â”‚            â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚         â”‚           â”‚            â”‚            â”‚           â”‚
    â”‚ 18. WS: Chat Message â”‚           â”‚            â”‚           â”‚
    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
    â”‚         â”‚           â”‚            â”‚            â”‚           â”‚
```

### 3.2 DescriÃ§Ã£o do Fluxo

1. **Cliente cria pedido** via POST /orders atravÃ©s do Gateway
2. **Gateway valida JWT** com Auth Service
3. **Order Service** cria o pedido e salva no banco
4. **Order Service** publica evento `order.created` no Kafka
5. **Chat Service** consome o evento e cria automaticamente o chat
6. **Cliente recebe confirmaÃ§Ã£o** com ID do pedido
7. **Cliente recebe notificaÃ§Ã£o WebSocket** de novo pedido
8. **Operador aceita pedido** via PATCH /orders/{id}/accept
9. **Order Service** atualiza status e publica evento `order.accepted`
10. **Product Service** consome evento e decrementa estoque
11. **Chat Service** consome evento e envia mensagem automÃ¡tica no chat
12. **Cliente e operador recebem mensagem via WebSocket**

---

## 4. Diagrama de SequÃªncia - Chat em Tempo Real

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Store  â”‚  â”‚ Chat   â”‚  â”‚  Redis   â”‚  â”‚  Chat  â”‚  â”‚Customer â”‚
â”‚Client â”‚  â”‚Service â”‚  â”‚  PubSub  â”‚  â”‚Service â”‚  â”‚ Client  â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚          â”‚            â”‚            â”‚            â”‚
    â”‚ 1. Connect WS         â”‚            â”‚            â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚            â”‚            â”‚
    â”‚          â”‚            â”‚            â”‚            â”‚
    â”‚ 2. Subscribe to topic â”‚            â”‚            â”‚
    â”‚    /topic/chat/123    â”‚            â”‚            â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚            â”‚            â”‚
    â”‚          â”‚            â”‚            â”‚            â”‚
    â”‚          â”‚            â”‚            â”‚ 3. Connect WS
    â”‚          â”‚            â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚          â”‚            â”‚            â”‚            â”‚
    â”‚          â”‚            â”‚            â”‚ 4. Subscribe
    â”‚          â”‚            â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚          â”‚            â”‚            â”‚            â”‚
    â”‚ 5. Send Message       â”‚            â”‚            â”‚
    â”‚    "Pedido pronto"    â”‚            â”‚            â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚            â”‚            â”‚
    â”‚          â”‚            â”‚            â”‚            â”‚
    â”‚          â”‚ 6. Save to MongoDB      â”‚            â”‚
    â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚            â”‚
    â”‚          â”‚            â”‚            â”‚            â”‚
    â”‚          â”‚ 7. Publish to Redis     â”‚            â”‚
    â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚            â”‚
    â”‚          â”‚            â”‚            â”‚            â”‚
    â”‚          â”‚            â”‚ 8. Broadcast Message    â”‚
    â”‚          â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚
    â”‚          â”‚            â”‚            â”‚            â”‚
    â”‚          â”‚            â”‚            â”‚ 9. Send via WS
    â”‚          â”‚            â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚          â”‚            â”‚            â”‚            â”‚
    â”‚ 10. Confirm delivery  â”‚            â”‚            â”‚
    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚            â”‚            â”‚
    â”‚          â”‚            â”‚            â”‚            â”‚
    â”‚          â”‚            â”‚            â”‚ 11. Read Receipt
    â”‚          â”‚            â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚          â”‚            â”‚            â”‚            â”‚
    â”‚          â”‚            â”‚            â”‚ 12. Update DB
    â”‚          â”‚            â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚          â”‚            â”‚            â”‚            â”‚
```

---

## 5. Diagrama de ImplantaÃ§Ã£o (Kubernetes)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       KUBERNETES CLUSTER                             â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                     Ingress Controller                          â”‚ â”‚
â”‚  â”‚                  (NGINX / Traefik)                              â”‚ â”‚
â”‚  â”‚             - SSL Termination                                   â”‚ â”‚
â”‚  â”‚             - Load Balancing                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                         â”‚                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    API Gateway Pod                              â”‚ â”‚
â”‚  â”‚                 (Spring Cloud Gateway)                          â”‚ â”‚
â”‚  â”‚                    Replicas: 2                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                         â”‚                                            â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚         â”‚               â”‚               â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚   Eureka    â”‚ â”‚   Config   â”‚ â”‚   Kafka    â”‚                    â”‚
â”‚  â”‚   Service   â”‚ â”‚   Service  â”‚ â”‚   Pod      â”‚                    â”‚
â”‚  â”‚  Replicas:2 â”‚ â”‚ Replicas:1 â”‚ â”‚ Replicas:3 â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                        â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              NAMESPACE: microservices        â”‚                 â”‚ â”‚
â”‚  â”‚                                              â”‚                 â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                 â”‚ â”‚
â”‚  â”‚  â”‚  Auth    â”‚  â”‚ Product  â”‚  â”‚  Order   â”‚  â”‚                 â”‚ â”‚
â”‚  â”‚  â”‚  Pod     â”‚  â”‚   Pod    â”‚  â”‚   Pod    â”‚  â”‚                 â”‚ â”‚
â”‚  â”‚  â”‚Replicas:2â”‚  â”‚Replicas:3â”‚  â”‚Replicas:3â”‚  â”‚                 â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â”‚                 â”‚ â”‚
â”‚  â”‚       â”‚             â”‚             â”‚         â”‚                 â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”‚                 â”‚ â”‚
â”‚  â”‚  â”‚PostgreSQLâ”‚  â”‚PostgreSQLâ”‚  â”‚PostgreSQLâ”‚  â”‚                 â”‚ â”‚
â”‚  â”‚  â”‚StatefulSetâ”‚ â”‚StatefulSetâ”‚ â”‚StatefulSetâ”‚ â”‚                 â”‚ â”‚
â”‚  â”‚  â”‚    +     â”‚  â”‚    +     â”‚  â”‚          â”‚  â”‚                 â”‚ â”‚
â”‚  â”‚  â”‚   PVC    â”‚  â”‚  Redis   â”‚  â”‚   PVC    â”‚  â”‚                 â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   Pod    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                 â”‚ â”‚
â”‚  â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚                 â”‚ â”‚
â”‚  â”‚                                              â”‚                 â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                 â”‚ â”‚
â”‚  â”‚  â”‚ Delivery â”‚  â”‚   Chat   â”‚  â”‚  Report  â”‚  â”‚                 â”‚ â”‚
â”‚  â”‚  â”‚   Pod    â”‚  â”‚   Pod    â”‚  â”‚   Pod    â”‚  â”‚                 â”‚ â”‚
â”‚  â”‚  â”‚Replicas:2â”‚  â”‚Replicas:3â”‚  â”‚Replicas:2â”‚  â”‚                 â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â”‚                 â”‚ â”‚
â”‚  â”‚       â”‚             â”‚             â”‚         â”‚                 â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”‚                 â”‚ â”‚
â”‚  â”‚  â”‚PostgreSQLâ”‚  â”‚ MongoDB  â”‚  â”‚PostgreSQLâ”‚  â”‚                 â”‚ â”‚
â”‚  â”‚  â”‚StatefulSetâ”‚ â”‚StatefulSetâ”‚ â”‚ (Replica)â”‚  â”‚                 â”‚ â”‚
â”‚  â”‚  â”‚   PVC    â”‚  â”‚   +      â”‚  â”‚   PVC    â”‚  â”‚                 â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  Redis   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                 â”‚ â”‚
â”‚  â”‚                â”‚   Pod    â”‚                 â”‚                 â”‚ â”‚
â”‚  â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚            NAMESPACE: monitoring                                â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚ â”‚
â”‚  â”‚  â”‚Prometheusâ”‚  â”‚ Grafana  â”‚  â”‚    ELK   â”‚                    â”‚ â”‚
â”‚  â”‚  â”‚  Pod     â”‚  â”‚   Pod    â”‚  â”‚  Stack   â”‚                    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â”‚  ConfigMaps: app-configs, env-configs                                â”‚
â”‚  Secrets: db-credentials, jwt-secrets, api-keys                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.1 Recursos Kubernetes

**Deployments:**
- auth-service: 2 replicas
- product-service: 3 replicas
- order-service: 3 replicas
- delivery-service: 2 replicas
- chat-service: 3 replicas
- report-service: 2 replicas

**StatefulSets:**
- PostgreSQL databases (1 por serviÃ§o)
- MongoDB
- Redis
- Kafka

**Services:**
- ClusterIP para comunicaÃ§Ã£o interna
- LoadBalancer para Ingress

**Persistent Volumes:**
- 10GB por banco PostgreSQL
- 20GB para MongoDB
- 50GB para Kafka

**HPA (Horizontal Pod Autoscaler):**
- Escala automÃ¡tica baseada em CPU (70%)

---

## 6. Diagrama de Caso de Uso

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Backoffice System      â”‚
                    â”‚                         â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚               â”‚                         â”‚               â”‚
    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
    â”‚     â”‚                    â”‚    â”‚                 â”‚     â”‚
    â”‚     â”‚   Gerenciar        â”‚    â”‚   Gerenciar     â”‚     â”‚
    â”‚     â”‚   Produtos         â”‚    â”‚   Pedidos       â”‚     â”‚
    â”‚     â”‚                    â”‚    â”‚                 â”‚     â”‚
    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
    â”‚               â”‚                         â”‚               â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”          â”‚                         â”‚          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
â”‚Operatorâ”‚          â”‚                         â”‚          â”‚  Admin   â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
    â”‚        â”‚                 â”‚    â”‚                 â”‚      â”‚
    â”‚        â”‚   Comunicar     â”‚    â”‚   Atribuir      â”‚      â”‚
    â”‚        â”‚   via Chat      â”‚    â”‚   Entregas      â”‚      â”‚
    â”‚        â”‚                 â”‚    â”‚                 â”‚      â”‚
    â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
    â”‚                  â”‚                      â”‚               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚                      â”‚
                       â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                  â”‚
              â”‚                 â”‚   â”‚   Visualizar     â”‚
              â”‚   Visualizar    â”‚   â”‚   RelatÃ³rios     â”‚
              â”‚   Estoque       â”‚   â”‚                  â”‚
              â”‚                 â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. Diagrama de Classes - Domain Model (Order Service)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Customer          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - id: Long             â”‚
â”‚ - name: String         â”‚
â”‚ - phone: String        â”‚
â”‚ - email: String        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + getOrders()          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ 1
        â”‚ has
        â”‚ *
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Order            â”‚          â”‚      Address           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - id: Long             â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ - id: Long             â”‚
â”‚ - orderNumber: String  â”‚ delivers â”‚ - street: String       â”‚
â”‚ - status: OrderStatus  â”‚   to     â”‚ - number: String       â”‚
â”‚ - totalAmount: BigDec  â”‚          â”‚ - city: String         â”‚
â”‚ - createdAt: DateTime  â”‚          â”‚ - zipCode: String      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ + accept()             â”‚
â”‚ + reject(reason)       â”‚
â”‚ + updateStatus(status) â”‚
â”‚ + isEditable()         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ 1
        â”‚ contains
        â”‚ *
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      OrderItem         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - id: Long             â”‚
â”‚ - productId: Long      â”‚
â”‚ - productName: String  â”‚
â”‚ - quantity: Integer    â”‚
â”‚ - unitPrice: BigDecimalâ”‚
â”‚ - subtotal: BigDecimal â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + calculateSubtotal()  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    <<enumeration>>     â”‚
â”‚      OrderStatus       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ RECEIVED               â”‚
â”‚ ACCEPTED               â”‚
â”‚ IN_PREPARATION         â”‚
â”‚ READY                  â”‚
â”‚ OUT_FOR_DELIVERY       â”‚
â”‚ DELIVERED              â”‚
â”‚ CANCELED               â”‚
â”‚ REJECTED               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. Diagrama de Estados - Pedido

```
                    [Pedido Criado]
                          â”‚
                          â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚   RECEIVED   â”‚
                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                       â”‚
        [Aceitar]                [Recusar]
              â”‚                       â”‚
              â–¼                       â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  ACCEPTED   â”‚         â”‚  REJECTED   â”‚ [Final]
       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ [Iniciar Preparo]
              â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ IN_PREPARATION  â”‚
       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ [Finalizar Preparo]
              â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚    READY    â”‚
       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ [Atribuir Entregador]
              â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ OUT_FOR_DELIVERY â”‚
       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ [Confirmar Entrega]
              â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  DELIVERED  â”‚ [Final]
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

       * De qualquer estado (exceto finais):
         [Cancelar] â†’ CANCELED [Final]
```

---

## 9. Diagrama C4 - NÃ­vel Container

```
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚   Backoffice    â”‚
                          â”‚      User       â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚ HTTPS
                                   â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚  React Single   â”‚
                          â”‚  Page App       â”‚
                          â”‚  [JavaScript]   â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚ JSON/HTTPS
                                   â”‚ WebSocket
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚   API Gateway       â”‚
                          â”‚ [Spring Cloud]      â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                          â”‚                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Auth Service  â”‚         â”‚ Order Service    â”‚      â”‚Product Service   â”‚
â”‚[Spring Boot] â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚  [Spring Boot]   â”‚â”€â”€â”€â”€â”€â–ºâ”‚  [Spring Boot]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  Auth   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜Event â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                           â”‚                        â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚PostgreSQLâ”‚               â”‚  PostgreSQL â”‚          â”‚PostgreSQLâ”‚
   â”‚   DB    â”‚               â”‚     DB      â”‚          â”‚ + Redis â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚  Apache Kafka    â”‚
                          â”‚ Message Broker   â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                           â”‚                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Chat Service â”‚            â”‚Delivery Service â”‚        â”‚ Report Service  â”‚
â”‚[Spring Boot]â”‚            â”‚  [Spring Boot]  â”‚        â”‚  [Spring Boot]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                           â”‚                          â”‚
 â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
 â”‚  MongoDB    â”‚            â”‚  PostgreSQL  â”‚          â”‚  PostgreSQL  â”‚
 â”‚  + Redis    â”‚            â”‚      DB      â”‚          â”‚(Read Replica)â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Documento elaborado por**: Equipe de Desenvolvimento  
**Data**: Fevereiro de 2026  
**VersÃ£o**: 1.0
